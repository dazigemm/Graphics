<script src=M.js></script>
<script src=lib2k.js></script>
<script src=SHAPE.js></script>

<body bgcolor=black text=white>
<center>
	<table border="5px solid white">
		<tr>
			<td>
				<canvas id='canvas1' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				<h1> The Three Little Pigs - An Animated Alternative </h1>
				Once upon a time, there lived three little pigs.
				On their 18th birthday, their parents told them, "You are now adults. It is time for you three to grow up and be self sufficient".
				So the three little pigs packed their toothbrushes, said good-bye to their parents and set off to find new homes.   
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas2' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				The oldest pig had spent all of his money on food last month. 
				Fortunately, he met a nice couple along the road. 
				They offered him free room and board. Suspicious, right?
				But the nice couple had a nice brick house, so he took them up on their offer.
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas3' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				To the dismay of the younger brothers, the nice couple only had one room free.
				However, they did have a backyard with lots of trees. 
				Piglet number two had always dreamed of living in a tree house. 
				Unfortunately, he discovered he could not climb a tree. 
				He had to settle for a house made of sticks.
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas4' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				The youngest pig felt very left out.
				Where was he supposed to live?
				Thankfully, the nice couple reassured him that they had a farm, and they just so happened to be hiring.
				Although he had never spent a day at a farm before, he felt a desire to try his hand at farming. 
				"What better way to understand the farm animals then to learn how they live?" thought the young piglet. 
				Therefore, he decided to spend some time in a house of straw.
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas5' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				The three little pigs lived at their respective houses for a few weeks.
				They were given good food to eat, and never asked to do any work.
				One fine day, when the three piglets were sleeping in yet again, a wolf wandered onto the nice couple's property.
				<br>
				Huffity Puff!
				<br>
				Down came the houses of stick and straw. 
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas6' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				The wolf was sad. All he wanted was a home. 
				However, all the houses he had come across fell apart when he sneezed.
				Whenever allergy season rolled around, he had to find a new home.
				So when the wolf saw that the brick house was still left standing, his heart skipped a beat.
				He decided to ring the doorbell and ask if he could rent a room. 
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas7' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				The nice couple were very nice.
				They took one look at the wolf and immediately agreed.
				Not only would they offer the wolf free room and board, they would provide him visits to the salon whenever he wished.
				The three little piglets were very confused.
				"I thought you only had one room available..." said the youngest piglet.
				"Oh but Mr. Wolf seems like such a nice guy. We will find some way to make do," the nice couple replied. "Tonight, we shall have a feast!"
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas8' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				In the next town over, the parents of the three young piglet were worried.
				It had been a month since the three little piglets had left home, but none of them had bothered to visit.
				There wasn't even a postcard from them to be found.
				Even Mr. Wolf, the detective they hired to track down their children was no help.
				Whenever they ran into him, he would only apologize profusely, and tell them he could find neither hide nor hair of them.  But he had an appointment at the salon for his fur, and couldn't be late. 
				<br> The End 
			</td> 
		</tr>	
	</table> 
	<h2> Happy Mother's Day!  
		<br> If you haven't talked to your mom in a while, now would be a good time to call her up and let her know you're alive.  
		<br> And remember - don't trust strangers. 
	</h2> 
	<hr>
	The story was written after seeing texture mapping.
	
</center> 
</body> 

<script> var vs = '\ attribute vec3 aPos, aNor;\n\ attribute vec2 aUV;\n\
varying   vec3 vPos, vNor;\n\
varying   vec2 vUV;\n\
uniform   mat4 matrix, invMatrix;\n\
void main() {\n\
   vec4 pos = matrix * vec4(aPos, 1.);\n\
   vec4 nor = vec4(aNor, 0.) * invMatrix;\n\
   gl_Position = pos;\n\
   vPos = pos.xyz;\n\
   vNor = nor.xyz;\n\
   vUV  = aUV;\n\
}\n\
';

// light pink
var fs1 = '\
varying vec3 vPos, vNor;\n\
varying vec2 vUV;\n\
void main() {\n\
   vec3 normal = normalize(vNor);\n\
   vec3 c = vec3(.26,.18,.19);\n\
   c += vec3(.7,.7,1.) * max(0.,dot(normal, vec3( .7, .7, .7)));\n\
   c += vec3(.5,.3,.1) * max(0.,dot(normal, vec3(-.7,-.7,-.7)));\n\
   gl_FragColor = vec4(sqrt(c), 1.);\n\
}\n\
';

// dark pink
var fs3 = '\
varying vec3 vPos, vNor;\n\
varying vec2 vUV;\n\
void main() {\n\
   vec3 normal = normalize(vNor);\n\
   vec3 c = vec3(.26,.1,.18);\n\
   c += vec3(.7,.7,1.) * max(0.,dot(normal, vec3( .7, .7, .7)));\n\
   c += vec3(.5,.3,.1) * max(0.,dot(normal, vec3(-.7,-.7,-.7)));\n\
   gl_FragColor = vec4(sqrt(c), 1.);\n\
}\n\
';

// gray
var fs4 = '\
varying vec3 vPos, vNor;\n\
varying vec2 vUV;\n\
void main() {\n\
   vec3 normal = normalize(vNor);\n\
   vec3 c = vec3(0,0,0);\n\
   c += vec3(.7,.7,1.) * max(0.,dot(normal, vec3( .7, .7, .7)));\n\
   c += vec3(.5,.3,.1) * max(0.,dot(normal, vec3(-.7,-.7,-.7)));\n\
   gl_FragColor = vec4(sqrt(c), 1.);\n\
}\n\
';



var fs2 = '\
varying vec3 vPos, vNor;\n\
varying vec2 vUV;\n\
uniform sampler2D uSampler;\n\
void main() {\n\
   vec3 normal = normalize(vNor);\n\
   vec3 c = vec3(.1,.1,.1);\n\
   c += vec3(.7,.7,1.) * max(0.,dot(normal, vec3( .7, .7, .7)));\n\
   c += vec3(.5,.3,.1) * max(0.,dot(normal, vec3(-.7,-.7,-.7)));\n\
   vec4 texture = texture2D(uSampler, vUV);\n\
   c *= texture.rgb;\n\
   gl_FragColor = vec4(sqrt(c), 1.);\n\
}\n\
';
   
   var m = M.identityMatrix();

   /**************** CANVAS 1 ****************** 
    * Three Little Pigs

   *********************************************/
    var scene1 = new Scene();// canvas 1

    var pink = new Material(vs, fs1);
    var pinker = new Material(vs, fs3);
    var black = new Material(vs, fs4);

    /********* Pig 1 **********/

    var pigHead1, pigNose1, pigEarL1, pigEarR1, pigEyeL1, pigEyeR1,pigNL1, pigNR1, pigBody1;

    pigHead1 = new SceneObject();
    pigHead1.setVertices(SHAPE.cylinder(50));
    pigHead1.setMaterial(pink);
    scene1.addObject(pigHead1);

    pigNose1 = new SceneObject();
    pigNose1.setVertices(SHAPE.cylinder(50));
    pigNose1.setMaterial(pinker);
    scene1.addObject(pigNose1);

    pigEarL1 = new SceneObject();
    pigEarL1.setVertices(SHAPE.cylinder(3));
    pigEarL1.setMaterial(pinker);
    scene1.addObject(pigEarL1);

    pigEarR1 = new SceneObject();
    pigEarR1.setVertices(SHAPE.cylinder(3));
    pigEarR1.setMaterial(pinker);
    scene1.addObject(pigEarR1);

    pigEyeL1 = new SceneObject();
    pigEyeL1.setVertices(SHAPE.cylinder(50));
    pigEyeL1.setMaterial(black);
    scene1.addObject(pigEyeL1);

    pigEyeR1 = new SceneObject();
    pigEyeR1.setVertices(SHAPE.cylinder(50));
    pigEyeR1.setMaterial(black);
    scene1.addObject(pigEyeR1);

    pigNL1 = new SceneObject();
    pigNL1.setVertices(SHAPE.cylinder(50));
    pigNL1.setMaterial(black);
    scene1.addObject(pigNL1);

    pigNR1 = new SceneObject();
    pigNR1.setVertices(SHAPE.cylinder(50));
    pigNR1.setMaterial(black);
    scene1.addObject(pigNR1);

    pigBody1 = new SceneObject();
    pigBody1.setVertices(SHAPE.cylinder(50));
    pigBody1.setMaterial(pink);
    scene1.addObject(pigBody1);

    /********* Pig 2 **********/

    var pigHead2, pigNose2, pigEarL2, pigEarR2, pigEyeL2, pigEyeR2,pigNL2, pigNR2, pigBody2;

    pigHead2 = new SceneObject();
    pigHead2.setVertices(SHAPE.cylinder(50));
    pigHead2.setMaterial(pink);
    scene1.addObject(pigHead2);

    pigNose2 = new SceneObject();
    pigNose2.setVertices(SHAPE.cylinder(50));
    pigNose2.setMaterial(pinker);
    scene1.addObject(pigNose2);

    pigEarL2 = new SceneObject();
    pigEarL2.setVertices(SHAPE.cylinder(3));
    pigEarL2.setMaterial(pinker);
    scene1.addObject(pigEarL2);

    pigEarR2 = new SceneObject();
    pigEarR2.setVertices(SHAPE.cylinder(3));
    pigEarR2.setMaterial(pinker);
    scene1.addObject(pigEarR2);

    pigEyeL2 = new SceneObject();
    pigEyeL2.setVertices(SHAPE.cylinder(50));
    pigEyeL2.setMaterial(black);
    scene1.addObject(pigEyeL2);

    pigEyeR2 = new SceneObject();
    pigEyeR2.setVertices(SHAPE.cylinder(50));
    pigEyeR2.setMaterial(black);
    scene1.addObject(pigEyeR2);

    pigNL2 = new SceneObject();
    pigNL2.setVertices(SHAPE.cylinder(50));
    pigNL2.setMaterial(black);
    scene1.addObject(pigNL2);

    pigNR2 = new SceneObject();
    pigNR2.setVertices(SHAPE.cylinder(50));
    pigNR2.setMaterial(black);
    scene1.addObject(pigNR2);

    pigBody2 = new SceneObject();
    pigBody2.setVertices(SHAPE.cylinder(50));
    pigBody2.setMaterial(pink);
    scene1.addObject(pigBody2);

    /********* Pig 3 **********/

    var pigHead3, pigNose3, pigEarL3, pigEarR3, pigEyeL3, pigEyeR3,pigNL3, pigNR3, pigBody3;

    pigHead3 = new SceneObject();
    pigHead3.setVertices(SHAPE.cylinder(50));
    pigHead3.setMaterial(pink);
    scene1.addObject(pigHead3);

    pigNose3 = new SceneObject();
    pigNose3.setVertices(SHAPE.cylinder(50));
    pigNose3.setMaterial(pinker);
    scene1.addObject(pigNose3);

    pigEarL3 = new SceneObject();
    pigEarL3.setVertices(SHAPE.cylinder(3));
    pigEarL3.setMaterial(pinker);
    scene1.addObject(pigEarL3);

    pigEarR3 = new SceneObject();
    pigEarR3.setVertices(SHAPE.cylinder(3));
    pigEarR3.setMaterial(pinker);
    scene1.addObject(pigEarR3);

    pigEyeL3 = new SceneObject();
    pigEyeL3.setVertices(SHAPE.cylinder(50));
    pigEyeL3.setMaterial(black);
    scene1.addObject(pigEyeL3);

    pigEyeR3 = new SceneObject();
    pigEyeR3.setVertices(SHAPE.cylinder(50));
    pigEyeR3.setMaterial(black);
    scene1.addObject(pigEyeR3);

    pigNL3 = new SceneObject();
    pigNL3.setVertices(SHAPE.cylinder(50));
    pigNL3.setMaterial(black);
    scene1.addObject(pigNL3);

    pigNR3 = new SceneObject();
    pigNR3.setVertices(SHAPE.cylinder(50));
    pigNR3.setMaterial(black);
    scene1.addObject(pigNR3);

    pigBody3 = new SceneObject();
    pigBody3.setVertices(SHAPE.cylinder(50));
    pigBody3.setMaterial(pink);
    scene1.addObject(pigBody3);



    canvas1.scene = scene1;

gl_start(canvas1,
   function(time) {
	
	M.identity(m);
	//M.rotateY(m, time);
	M.translate(m, [0, -.5, 0]);
	M.scale(m, .8);
	
	/********* Pig 1 **********/

	M.save(m);
	 M.scale(m, .3, .3, 0);
	 pigHead1.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .15, .1, 0);
	 //M.scale(m, Math.abs(Math.cos(time)), Math.abs(Math.sin(time)), 1);
	 M.translate(m, [0, -1, 0]);
	 pigNose1.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [-1.5, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEarL1.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [1.5, 1.3, 0]);
	 pigEarR1.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [-1.5, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEyeL1.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [1.5, 1.3, 0]);
	 pigEyeR1.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [-2, -3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigNL1.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [2, -3, 0]);
	 pigNR1.setMatrix(m);
	M.restore(m);
	
	M.save(m);
	 M.scale(m, .3, .5, 0);
	 M.translate(m, [0, -1.5, 0]);
	 pigBody1.setMatrix(m);
	M.restore(m);

	/********* Pig 2 **********/

	M.save(m);
	 M.scale(m, .3, .3, 0);
	 M.translate(m, [-3, 0, 0]); 
	 pigHead2.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .15, .1, 0);
	 //M.scale(m, Math.abs(Math.cos(time)), Math.abs(Math.sin(time)), 1);
	 M.translate(m, [-6, -1, 0]);
	 pigNose2.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [-8.5, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEarL2.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [-5.5, 1.3, 0]);
	 pigEarR2.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [-93, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEyeL2.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [-88, 1.3, 0]);
	 pigEyeR2.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [-95, -3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigNL2.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [-87, -3, 0]);
	 pigNR2.setMatrix(m);
	M.restore(m);
	
	M.save(m);
	 M.scale(m, .3, .5, 0);
	 M.translate(m, [-3, -1.5, 0]);
	 pigBody2.setMatrix(m);
	M.restore(m);

	/********* Pig 3 **********/
	M.save(m);
	 M.scale(m, .3, .3, 0);
	 M.translate(m, [3, 0, 0]); 
	 pigHead3.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .15, .1, 0);
	 //M.scale(m, Math.abs(Math.cos(time)), Math.abs(Math.sin(time)), 1);
	 M.translate(m, [6, -1, 0]);
	 pigNose3.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [5.5, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEarL3.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [8.5, 1.3, 0]);
	 pigEarR3.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [88, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEyeL3.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [93, 1.3, 0]);
	 pigEyeR3.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [87, -3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigNL3.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [95, -3, 0]);
	 pigNR3.setMatrix(m);
	M.restore(m);
	
	M.save(m);
	 M.scale(m, .3, .5, 0);
	 M.translate(m, [3, -1.5, 0]);
	 pigBody3.setMatrix(m);
	M.restore(m);

	
   }
);

   /**************** CANVAS 2 ******************
     * Objects: Pig 1, brick house, nice couple

   *********************************************/
   var tileR, brickH, grass, sky;
   var scene2 = new Scene();// canvas 2

   var materialT = new Material(vs, fs2);
   materialT.setTexture('imgs/roof.jpg');// tile
   var materialB = new Material(vs, fs2);
   materialB.setTexture('imgs/brick.png');// brick
   var matG = new Material(vs, fs2);
   matG.setTexture('imgs/grass.jpg');
   var matSky = new Material(vs, fs2);
   matSky.setTexture('imgs/sky.jpg');

   tileR = new SceneObject();// tile roof
   tileR.setVertices(SHAPE.cylinder(3));
   tileR.setMaterial(materialT);
   scene2.addObject(tileR);
   
   brickH = new SceneObject();// brick house
   brickH.setVertices(SHAPE.cylinder(4));
   brickH.setMaterial(materialB);
   scene2.addObject(brickH);
  
   grass = new SceneObject();
   grass.setVertices(SHAPE.cylinder(4));
   grass.setMaterial(matG);
   scene2.addObject(grass);

   sky = new SceneObject();
   sky.setVertices(SHAPE.cylinder(4));
   sky.setMaterial(matSky);
   scene2.addObject(sky);

   canvas2.scene = scene2;

gl_start(canvas2,
   function(time) {
	
	M.identity(m);
	M.rotateY(m, Math.PI/2);
	M.translate(m, [0, 0, -.68]);
	M.scale(m, 0.9);

	M.save(m);
	 M.translate(m, [0, -.9, .68]);
	 M.rotateZ(m, Math.PI*11 /12);
	 M.scale(m, 0, .8, 1.5);
	 grass.setMatrix(m);
	M.restore(m);
	
	M.save(m);
	 M.translate(m, [1, .5, .68]); 
	 M.rotateZ(m, Math.PI/4);
	 M.scale(m, 1, 1, 1.5);
	 sky.setMatrix(m);
	M.restore(m);

	M.save(m);// tile roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 1.3, 0]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 tileR.setMatrix(m);
	M.restore(m);

	M.save(m);// brick house
	 M.scale(m, .2, .2, .3);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 brickH.setMatrix(m);
	M.restore(m);
   }
);

   /**************** CANVAS 3 ******************
     * Objects: Pig 2, wood house

   *********************************************/
   var woodR, woodH, grass2, sky2;
   var scene3 = new Scene();// canvas 3

   var materialW = new Material(vs, fs2);
   materialW.setTexture('imgs/wood-2.jpg');// wood
   var matG2 = new Material(vs, fs2);
   matG2.setTexture('imgs/grass.jpg');
   var matSky2 = new Material(vs, fs2);
   matSky2.setTexture('imgs/forest2.jpg');

   grass2 = new SceneObject();
   grass2.setVertices(SHAPE.cylinder(4));
   grass2.setMaterial(matG2);
   scene3.addObject(grass2);

   sky2 = new SceneObject();
   sky2.setVertices(SHAPE.cylinder(4));
   sky2.setMaterial(matSky2);
   scene3.addObject(sky2);

   woodR = new SceneObject();// wood roof
   woodR.setVertices(SHAPE.cylinder(3));
   woodR.setMaterial(materialW);
   scene3.addObject(woodR);
   
   woodH = new SceneObject();// wood house
   woodH.setVertices(SHAPE.cylinder(4));
   woodH.setMaterial(materialW);
   scene3.addObject(woodH);
  
   canvas3.scene = scene3;

gl_start(canvas3,
   function(time) {
	
	M.identity(m);
	M.rotateY(m, Math.PI/2);
	M.translate(m, [0, 0, -.68]);
	M.scale(m, 0.9);
 
	M.save(m);
	 M.translate(m, [0, -.9, .68]);
	 M.rotateZ(m, Math.PI*11 /12);
	 M.scale(m, 0, .8, 1.5);
	 grass2.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.translate(m, [1, .5, .68]); 
	 M.rotateZ(m, Math.PI/4);
	 M.scale(m, 1, 1, 1.5);
	 sky2.setMatrix(m);
	M.restore(m);

   	M.save(m);// stick roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 1.3, 0]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 woodR.setMatrix(m);
	M.restore(m);

	M.save(m);// stick house 
	 M.scale(m, .2, .2, .3);
	 //M.translate(m, [0, 0, 2.5]);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 woodH.setMatrix(m);
	M.restore(m);
   }
);

   /**************** CANVAS 4 ******************
     * Objects: Pig 3, straw house

   *********************************************/
   var strawR, strawH;
   var scene4 = new Scene();// canvas 4

   var materialS = new Material(vs, fs2);
   materialS.setTexture('imgs/straw-3.jpg');// straw
   var matGround = new Material(vs, fs2);
   matGround.setTexture('imgs/grass.jpg');
   var matSky3 = new Material(vs, fs2);
   matSky3.setTexture('imgs/sky.jpg');

   grass3 = new SceneObject();
   grass3.setVertices(SHAPE.cylinder(4));
   grass3.setMaterial(matGround);
   scene4.addObject(grass3);

   sky3 = new SceneObject();
   sky3.setVertices(SHAPE.cylinder(4));
   sky3.setMaterial(matSky3);
   scene4.addObject(sky3);


   strawR = new SceneObject();// straw roof
   strawR.setVertices(SHAPE.cylinder(3));
   strawR.setMaterial(materialS);
   scene4.addObject(strawR);
   
   strawH = new SceneObject();// straw house
   strawH.setVertices(SHAPE.cylinder(4));
   strawH.setMaterial(materialS);
   scene4.addObject(strawH);
   
   canvas4.scene = scene4;
 
gl_start(canvas4,
   function(time) {
   	M.identity(m);
	M.rotateY(m, Math.PI/2);
	M.translate(m, [0, 0, -.68]);
	M.scale(m, 0.9);

        M.save(m);
	 M.translate(m, [0, -.9, .68]);
	 M.rotateZ(m, Math.PI*11 /12);
	 M.scale(m, 0, .8, 1.5);
	 grass3.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.translate(m, [1, .5, .68]); 
	 M.rotateZ(m, Math.PI/4);
	 M.scale(m, 1, 1, 1.5);
	 sky3.setMatrix(m);
	M.restore(m);

	M.save(m);// straw roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 1.3, 0]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 strawR.setMatrix(m);
	M.restore(m);

	M.save(m);// straw house 
	 M.scale(m, .2, .2, .3);
	 //M.translate(m, [0, 0, 5]);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 strawH.setMatrix(m);
	M.restore(m);

   }
);
  
   /**************** CANVAS 5 ******************
     * Objects: All three houses, wolf

   *********************************************/
   var obj1, obj2, obj3, obj4, obj5, obj6, grass4, sky4;
   var scene5 = new Scene();// canvas 5

   var material1 = new Material(vs, fs2);
   material1.setTexture('imgs/roof.jpg');// tile
   var material2 = new Material(vs, fs2);
   material2.setTexture('imgs/brick.png');// brick
   var material3 = new Material(vs, fs2);
   material3.setTexture('imgs/wood-2.jpg');// wood
   var material4 = new Material(vs, fs2);
   material4.setTexture('imgs/straw-3.jpg');// straw

   var matGrass = new Material(vs, fs2);
   matGrass.setTexture('imgs/grass.jpg');
   var matSky4 = new Material(vs, fs2);
   matSky4.setTexture('imgs/sky.jpg');

   grass4 = new SceneObject();
   grass4.setVertices(SHAPE.cylinder(4));
   grass4.setMaterial(matGrass);
   scene5.addObject(grass4);

   sky4 = new SceneObject();
   sky4.setVertices(SHAPE.cylinder(4));
   sky4.setMaterial(matSky4);
   scene5.addObject(sky4);


   obj1 = new SceneObject();// tile roof
   obj1.setVertices(SHAPE.cylinder(3));
   obj1.setMaterial(material1);
   scene5.addObject(obj1);
   
   obj2 = new SceneObject();// brick house
   obj2.setVertices(SHAPE.cylinder(4));
   obj2.setMaterial(material2);
   scene5.addObject(obj2);
   
   obj3 = new SceneObject();// wood roof
   obj3.setVertices(SHAPE.cylinder(3));
   obj3.setMaterial(material3);
   scene5.addObject(obj3);
   
   obj4 = new SceneObject();// wood house
   obj4.setVertices(SHAPE.cylinder(4));
   obj4.setMaterial(material3);
   scene5.addObject(obj4);
   
   obj5 = new SceneObject();// straw roof
   obj5.setVertices(SHAPE.cylinder(3));
   obj5.setMaterial(material4);
   scene5.addObject(obj5);
   
   obj6 = new SceneObject();// straw house
   obj6.setVertices(SHAPE.cylinder(4));
   obj6.setMaterial(material4);
   scene5.addObject(obj6);

   canvas5.scene = scene5;

gl_start(canvas5,
   function(time) {
	
	M.identity(m);
	M.rotateY(m, Math.PI/2);
	M.translate(m, [0, 0, -.68]);
	M.scale(m, 0.9);

	M.save(m);
	 M.translate(m, [0, -.9, .68]);
	 M.rotateZ(m, Math.PI*11 /12);
	 M.scale(m, 0, .8, 1.5);
	 grass4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.translate(m, [1, .5, .68]); 
	 M.rotateZ(m, Math.PI/4);
	 M.scale(m, 1, 1, 1.5);
	 sky4.setMatrix(m);
	M.restore(m);

	M.save(m);// tile roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 1.3, 0]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 obj1.setMatrix(m);
	M.restore(m);

	M.save(m);// brick house
	 M.scale(m, .2, .2, .3);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 obj2.setMatrix(m);
	M.restore(m);
  
   	M.save(m);// stick roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 2 + Math.sin(time), 3]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 M.rotateY(m, time);
	 obj3.setMatrix(m);
	M.restore(m);

	M.save(m);// stick house 
	 M.scale(m, .2, .2, .3);
	 M.translate(m, [0, 0, 2.5]);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 M.rotateY(m, time);
	 obj4.setMatrix(m);
	M.restore(m);

   	M.save(m);// straw roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 2 + Math.sin(time), 6]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 M.rotateY(m, time);
	 obj5.setMatrix(m);
	M.restore(m);

	M.save(m);// straw house 
	 M.scale(m, .2, .2, .3);
	 M.translate(m, [0, 0, 5]);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 M.rotateY(m, time);
	 obj6.setMatrix(m);
	M.restore(m);
//*/
   }
);


   /**************** CANVAS 6 ******************
     * Objects: sad wolf

   *********************************************/
  
   var scene6 = new Scene();// canvas 6
/*
   var pink2 = new Material(vs, fs1);
   var pinker2 = new Material(vs, fs3);
   var black2 = new Material(vs, fs4);


   /********* Pig  **********/
/*
    var pigHead4, pigNose4, pigEarL4, pigEarR4, pigEyeL4, pigEyeR4,pigNL4, pigNR4, pigBody4;

    pigHead4 = new SceneObject();
    pigHead4.setVertices(SHAPE.cylinder(50));
    pigHead4.setMaterial(pink2);
    scene6.addObject(pigHead4);

    pigNose4 = new SceneObject();
    pigNose4.setVertices(SHAPE.cylinder(50));
    pigNose4.setMaterial(pinker2);
    scene6.addObject(pigNose4);

    pigEarL4 = new SceneObject();
    pigEarL4.setVertices(SHAPE.cylinder(3));
    pigEarL4.setMaterial(pinker2);
    scene6.addObject(pigEarL4);

    pigEarR4 = new SceneObject();
    pigEarR4.setVertices(SHAPE.cylinder(3));
    pigEarR4.setMaterial(pinker2);
    scene6.addObject(pigEarR4);

    pigEyeL4 = new SceneObject();
    pigEyeL4.setVertices(SHAPE.cylinder(50));
    pigEyeL4.setMaterial(black2);
    scene6.addObject(pigEyeL4);

    pigEyeR4 = new SceneObject();
    pigEyeR4.setVertices(SHAPE.cylinder(50));
    pigEyeR4.setMaterial(black2);
    scene6.addObject(pigEyeR4);

    pigNL4 = new SceneObject();
    pigNL4.setVertices(SHAPE.cylinder(50));
    pigNL4.setMaterial(black2);
    scene6.addObject(pigNL4);

    pigNR4 = new SceneObject();
    pigNR4.setVertices(SHAPE.cylinder(50));
    pigNR4.setMaterial(black2);
    scene6.addObject(pigNR4);

    pigBody4 = new SceneObject();
    pigBody4.setVertices(SHAPE.cylinder(50));
    pigBody4.setMaterial(pink2);
    scene6.addObject(pigBody4);
    scene1.addObject(pigBody2);
*/
   canvas6.scene = scene6;
/*
gl_start(canvas6,
   function(time) {
	M.identity(m);
	//M.rotateY(m, time);
	M.translate(m, [0, -.5, 0]);
	M.scale(m, .8);
	

   /********* Pig **********/
/*
	M.save(m);
	 M.scale(m, .3, .3, 0);
	 M.translate(m, [-3, 0, 0]); 
	 pigHead4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .15, .1, 0);
	 M.translate(m, [-6, -1, 0]);
	 pigNose4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [-8.5, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEarL4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [-5.5, 1.3, 0]);
	 pigEarR4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [-93, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEyeL4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [-88, 1.3, 0]);
	 pigEyeR4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [-95, -3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigNL4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [-87, -3, 0]);
	 pigNR4.setMatrix(m);
	M.restore(m);
	
	M.save(m);
	 M.scale(m, .3, .5, 0);
	 M.translate(m, [-3, -1.5, 0]);
	 pigBody4.setMatrix(m);
	M.restore(m);


});
*/
   /**************** CANVAS 7 ******************
     * Objects: confused pigs, happy couple

   *********************************************/
   
var scene7 = new Scene();// canvas 6

   var pink2 = new Material(vs, fs1);
   var pinker2 = new Material(vs, fs3);
   var black2 = new Material(vs, fs4);


   /********* Pig  **********/

    var pigHead4, pigNose4, pigEarL4, pigEarR4, pigEyeL4, pigEyeR4,pigNL4, pigNR4, pigBody4;

    pigHead4 = new SceneObject();
    pigHead4.setVertices(SHAPE.cylinder(50));
    pigHead4.setMaterial(pink2);
    scene7.addObject(pigHead4);

    pigNose4 = new SceneObject();
    pigNose4.setVertices(SHAPE.cylinder(50));
    pigNose4.setMaterial(pinker2);
    scene7.addObject(pigNose4);

    pigEarL4 = new SceneObject();
    pigEarL4.setVertices(SHAPE.cylinder(3));
    pigEarL4.setMaterial(pinker2);
    scene7.addObject(pigEarL4);

    pigEarR4 = new SceneObject();
    pigEarR4.setVertices(SHAPE.cylinder(3));
    pigEarR4.setMaterial(pinker2);
    scene7.addObject(pigEarR4);

    pigEyeL4 = new SceneObject();
    pigEyeL4.setVertices(SHAPE.cylinder(50));
    pigEyeL4.setMaterial(black2);
    scene7.addObject(pigEyeL4);

    pigEyeR4 = new SceneObject();
    pigEyeR4.setVertices(SHAPE.cylinder(50));
    pigEyeR4.setMaterial(black2);
    scene7.addObject(pigEyeR4);

    pigNL4 = new SceneObject();
    pigNL4.setVertices(SHAPE.cylinder(50));
    pigNL4.setMaterial(black2);
    scene7.addObject(pigNL4);

    pigNR4 = new SceneObject();
    pigNR4.setVertices(SHAPE.cylinder(50));
    pigNR4.setMaterial(black2);
    scene7.addObject(pigNR4);

    pigBody4 = new SceneObject();
    pigBody4.setVertices(SHAPE.cylinder(50));
    pigBody4.setMaterial(pink2);
    scene7.addObject(pigBody4);
    
    
    canvas7.scene = scene7;

gl_start(canvas7,
   function(time) {
	M.identity(m);
	//M.rotateY(m, time);
	M.translate(m, [0, -.5+Math.abs(Math.sin(time))/2, 0]);
	//M.scale(m, .6);
	
   /********* Pig **********/

	M.save(m);
	 M.scale(m, .3, .3, 0);
	 M.translate(m, [0, 0, 0]); 
	 pigHead4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .15, .1, 0);
	 M.translate(m, [0, -1, 0]);
	 pigNose4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [-1.5, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEarL4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [1.5, 1.3, 0]);
	 pigEarR4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [-3, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEyeL4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [2, 1.3, 0]);
	 pigEyeR4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [-5, -3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigNL4.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [3, -3, 0]);
	 pigNR4.setMatrix(m);
	M.restore(m);
	
	M.save(m);
	 M.scale(m, .5+Math.abs(Math.cos(time)/3), .5, 0);
	 M.translate(m, [0, -1.5, 0]);
	 pigBody4.setMatrix(m);
	M.restore(m);

	
});


   /**************** CANVAS 8 ******************
     * Objects: Wolf with beautiful fur, angry parents of piglets

   *********************************************/
 var scene8 = new Scene();// canvas 8

   var pink3 = new Material(vs, fs1);
   var pinker3 = new Material(vs, fs3);
   var black3 = new Material(vs, fs4);


   /********* Pig  **********/

    var pigHead5, pigNose5, pigEarL5, pigEarR5, pigEyeL5, pigEyeR5,pigNL5, pigNR5, pigBody5;

    pigHead5 = new SceneObject();
    pigHead5.setVertices(SHAPE.cylinder(50));
    pigHead5.setMaterial(pink3);
    scene8.addObject(pigHead5);

    pigNose5 = new SceneObject();
    pigNose5.setVertices(SHAPE.cylinder(50));
    pigNose5.setMaterial(pinker3);
    scene8.addObject(pigNose5);

    pigEarL5 = new SceneObject();
    pigEarL5.setVertices(SHAPE.cylinder(3));
    pigEarL5.setMaterial(pinker3);
    scene8.addObject(pigEarL5);

    pigEarR5 = new SceneObject();
    pigEarR5.setVertices(SHAPE.cylinder(3));
    pigEarR5.setMaterial(pinker3);
    scene8.addObject(pigEarR5);

    pigEyeL5 = new SceneObject();
    pigEyeL5.setVertices(SHAPE.cylinder(50));
    pigEyeL5.setMaterial(black3);
    scene8.addObject(pigEyeL5);

    pigEyeR5 = new SceneObject();
    pigEyeR5.setVertices(SHAPE.cylinder(50));
    pigEyeR5.setMaterial(black3);
    scene8.addObject(pigEyeR5);

    pigNL5 = new SceneObject();
    pigNL5.setVertices(SHAPE.cylinder(50));
    pigNL5.setMaterial(black3);
    scene8.addObject(pigNL5);

    pigNR5 = new SceneObject();
    pigNR5.setVertices(SHAPE.cylinder(50));
    pigNR5.setMaterial(black3);
    scene8.addObject(pigNR5);

    pigBody5 = new SceneObject();
    pigBody5.setVertices(SHAPE.cylinder(50));
    pigBody5.setMaterial(pink3);
    scene8.addObject(pigBody5);
    
   canvas8.scene = scene8;

gl_start(canvas8,
   function(time) {
	M.identity(m);
	//M.rotateY(m, time);
	M.translate(m, [0, -.5, 0]);
	M.scale(m, .8);
	

   /********* Pig **********/

	M.save(m);
	 M.scale(m, .3, .3, 0);
	 M.translate(m, [-3, 0, 0]); 
	 pigHead5.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .15, .1, 0);
	 //M.scale(m, Math.abs(Math.cos(time)), Math.abs(Math.sin(time)), 1);
	 M.translate(m, [-6, -1, 0]);
	 pigNose5.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [-8.5, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEarL5.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .13, .13, 0);
	 M.translate(m, [-5.5, 1.3, 0]);
	 pigEarR5.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [-93, 1.3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigEyeL5.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .02, 0);
	 M.translate(m, [-88, 1.3, 0]);
	 pigEyeR5.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [-95, -3, 0]);
	 M.rotateZ(m, Math.PI/3);
	 pigNL5.setMatrix(m);
	M.restore(m);

	M.save(m);
	 M.scale(m, .01, .03, 0);
	 M.translate(m, [-87, -3, 0]);
	 pigNR5.setMatrix(m);
	M.restore(m);
	
	M.save(m);
	 M.scale(m, .3, .5, 0);
	 M.translate(m, [-3, -1.5, 0]);
	 pigBody5.setMatrix(m);
	M.restore(m);


});
 

</script>

