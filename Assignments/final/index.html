<script src=M.js></script>
<script src=lib2k.js></script>
<script src=SHAPE.js></script>

<body bgcolor=black text=white>
<center>
	<table border="5px solid white">
		<tr>
			<td>
				<canvas id='canvas1' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				<h1> The Three Little Pigs - An Animated Retelling </h1>
				Once upon a time, there lived three little pigs.
				On their 18th birthday, their parents told them, "You are now adults. It is time for you three to grow up and be self sufficient".
				So the three little pigs packed their toothbrushes, said good-bye to their parents and set off to find new homes.   
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas2' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				The oldest pig had spent all of his money on food last month. 
				Fortunately, he met a nice couple along the road. 
				They offered him free room and board. Suspicious, right?
				But the nice couple had a nice brick house, so he took them up on their offer.
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas3' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				To the dismay of the younger brothers, the nice couple only had one room free.
				However, they did have a backyard with lots of trees. 
				Piglet number two had always dreamed of living in a tree house. 
				Unfortunately, he discovered he could not climb a tree. 
				He had to settle for a house made of sticks.
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas4' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				The youngest pig felt very left out.
				Where was he supposed to live?
				Thankfully, the nice couple reassured him that they had a farm, and they just so happened to be hiring.
				Although he had never spent a day at a farm before, he felt a desire to try his hand at farming. 
				"What better way to understand the farm animals then to learn how they live?" thought the young piglet. 
				Therefore, he decided to spend some time in a house of straw.
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas5' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				The three little pigs lived at their respective houses for a few weeks.
				They were given good food to eat, and never asked to do any work.
				One fine day, when the three piglets were sleeping in yet again, a wolf wandered onto the nice couple's property.
				<br>
				Huffity Puff!
				<br>
				Down came the houses of stick and straw. 
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas6' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				The wolf was sad. All he wanted was a home. 
				However, all the houses he had come across fell apart when he sneezed.
				Whenever allergy season rolled around, he had to find a new home.
				So when the wolf saw that the brick house was still left standing, his heart skipped a beat.
				He decided to ring the doorbell and ask if he could rent a room. 
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas7' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				The nice couple was very nice.
				They took one look at the wolf and immediately agreed.
				Not only would they offer the wolf free room and board, they would provide him visits to the salon whenever he wished.
				The three little piglets were very confused.
				"I thought you only had one room available..." said the youngest piglet.
				"Oh but Mr. Wolf seems like such a nice guy. We will find some way to make do," the nice couple replied. "Tonight, we shall have a feast!"
			</td>
		</tr>
		<tr>
			<td>
				<canvas id='canvas8' width=600 height=500></canvas>
			</td>
			<td width=50></td>
			<td valign=top>
				In the next town over, the parents of the three young piglet were worried.
				It had been a month since the three little piglets had left home, but none of them had bothered to visit.
				There wasn't even a postcard from them to be found.
				Even Mr. Wolf, the detective they hired to track down their children was no help.
				Whenever they ran into him, he would only apologize profusely, and tell them he could find neither hide nor hair of them.
				But he had an appointment at the salon for his fur, and couldn't be late.
				<br>
				The End
			</td>
		</tr>	
	</table>
	Happy Mother's Day! If you haven't talked to your mom in a while, now would be a good time to call her up and let her know you're alive.
</center>
</body>
   
<script>

var vs = '\
attribute vec3 aPos, aNor;\n\
attribute vec2 aUV;\n\
varying   vec3 vPos, vNor;\n\
varying   vec2 vUV;\n\
uniform   mat4 matrix, invMatrix;\n\
void main() {\n\
   vec4 pos = matrix * vec4(aPos, 1.);\n\
   vec4 nor = vec4(aNor, 0.) * invMatrix;\n\
   gl_Position = pos;\n\
   vPos = pos.xyz;\n\
   vNor = nor.xyz;\n\
   vUV  = aUV;\n\
}\n\
';

var fs1 = '\
varying vec3 vPos, vNor;\n\
varying vec2 vUV;\n\
void main() {\n\
   vec3 normal = normalize(vNor);\n\
   vec3 c = vec3(.1,.1,.1);\n\
   c += vec3(.7,.7,1.) * max(0.,dot(normal, vec3( .7, .7, .7)));\n\
   c += vec3(.5,.3,.1) * max(0.,dot(normal, vec3(-.7,-.7,-.7)));\n\
   gl_FragColor = vec4(sqrt(c), 1.);\n\
}\n\
';

var fs2 = '\
varying vec3 vPos, vNor;\n\
varying vec2 vUV;\n\
uniform sampler2D uSampler;\n\
void main() {\n\
   vec3 normal = normalize(vNor);\n\
   vec3 c = vec3(.1,.1,.1);\n\
   c += vec3(.7,.7,1.) * max(0.,dot(normal, vec3( .7, .7, .7)));\n\
   c += vec3(.5,.3,.1) * max(0.,dot(normal, vec3(-.7,-.7,-.7)));\n\
   vec4 texture = texture2D(uSampler, vUV);\n\
   c *= texture.rgb;\n\
   gl_FragColor = vec4(sqrt(c), 1.);\n\
}\n\
';

   /**************** CANVAS 1 ******************
     * Three Little Pigs

   *********************************************/
   
   var obj1, obj2, obj3, obj4, obj5, obj6, tileR, brickH, woodR, woodH, strawR, strawH;

   var scene1 = new Scene();// canvas 1
   var scene2 = new Scene();// canvas 2
   var scene3 = new Scene();// canvas 3
   var scene4 = new Scene();// canvas 4
   var scene5 = new Scene();// canvas 5
   var scene6 = new Scene();// canvas 6

   var material1 = new Material(vs, fs2);
   material1.setTexture('imgs/roof.jpg');// tile
   var material2 = new Material(vs, fs2);
   material2.setTexture('imgs/brick.png');// brick
   var material3 = new Material(vs, fs2);
   material3.setTexture('imgs/wood-2.jpg');// wood
   var material4 = new Material(vs, fs2);
   material4.setTexture('imgs/straw-3.jpg');// straw
   
   var materialT = new Material(vs, fs2);
   materialT.setTexture('imgs/roof.jpg');// tile
   var materialB = new Material(vs, fs2);
   materialB.setTexture('imgs/brick.png');// brick
   var materialW = new Material(vs, fs2);
   materialW.setTexture('imgs/wood-2.jpg');// wood
   var materialS = new Material(vs, fs2);
   materialS.setTexture('imgs/straw-3.jpg');// straw

   obj1 = new SceneObject();// tile roof
   obj1.setVertices(SHAPE.cylinder(3));
   obj1.setMaterial(material1);
   scene5.addObject(obj1);
   
   obj2 = new SceneObject();// brick house
   obj2.setVertices(SHAPE.cylinder(4));
   obj2.setMaterial(material2);
   scene5.addObject(obj2);
   
   obj3 = new SceneObject();// wood roof
   obj3.setVertices(SHAPE.cylinder(3));
   obj3.setMaterial(material3);
   scene5.addObject(obj3);
   
   obj4 = new SceneObject();// wood house
   obj4.setVertices(SHAPE.cylinder(4));
   obj4.setMaterial(material3);
   scene5.addObject(obj4);
   
   obj5 = new SceneObject();// straw roof
   obj5.setVertices(SHAPE.cylinder(3));
   obj5.setMaterial(material4);
   scene5.addObject(obj5);
   
   obj6 = new SceneObject();// straw house
   obj6.setVertices(SHAPE.cylinder(4));
   obj6.setMaterial(material4);
   scene5.addObject(obj6);
   
   /**************** CANVAS 2 ******************
     * Three Little Pigs Waving

   *********************************************/
 
   tileR = new SceneObject();// tile roof
   tileR.setVertices(SHAPE.cylinder(3));
   tileR.setMaterial(materialT);
   scene2.addObject(tileR);
   
   brickH = new SceneObject();// brick house
   brickH.setVertices(SHAPE.cylinder(4));
   brickH.setMaterial(materialB);
   scene2.addObject(brickH);
   
   /**************** CANVAS 3 ******************
     * Three Little Pigs Waving

   *********************************************/

   woodR = new SceneObject();// wood roof
   woodR.setVertices(SHAPE.cylinder(3));
   woodR.setMaterial(materialW);
   scene3.addObject(woodR);
   
   woodH = new SceneObject();// wood house
   woodH.setVertices(SHAPE.cylinder(4));
   woodH.setMaterial(materialW);
   scene3.addObject(woodH);
   
   /**************** CANVAS 4 ******************
     * Three Little Pigs Waving

   *********************************************/

   strawR = new SceneObject();// straw roof
   strawR.setVertices(SHAPE.cylinder(3));
   strawR.setMaterial(materialS);
   scene4.addObject(strawR);
   
   strawH = new SceneObject();// straw house
   strawH.setVertices(SHAPE.cylinder(4));
   strawH.setMaterial(materialS);
   scene4.addObject(strawH);

   canvas1.scene = scene1;
   
   canvas2.scene = scene2;
   canvas3.scene = scene3;
   canvas4.scene = scene4;

   canvas5.scene = scene5;
   canvas6.scene = scene6;
   
   var m = M.identityMatrix();
//*
gl_start(canvas2,
   function(time) {
	
	M.identity(m);
	M.rotateY(m, Math.PI/2);
	M.translate(m, [0, 0, -.68]);
	M.scale(m, 0.9);

	M.save(m);// tile roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 1.3, 0]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 tileR.setMatrix(m);
	M.restore(m);

	M.save(m);// brick house
	 M.scale(m, .2, .2, .3);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 brickH.setMatrix(m);
	M.restore(m);
   }
);
//*
gl_start(canvas3,
   function(time) {
	
	M.identity(m);
	M.rotateY(m, Math.PI/2);
	M.translate(m, [0, 0, -.68]);
	M.scale(m, 0.9);
 
   	M.save(m);// stick roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 1.3, 0]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 woodR.setMatrix(m);
	M.restore(m);

	M.save(m);// stick house 
	 M.scale(m, .2, .2, .3);
	 //M.translate(m, [0, 0, 2.5]);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 woodH.setMatrix(m);
	M.restore(m);
   }
);

gl_start(canvas4,
   function(time) {
   	M.save(m);// straw roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 1.3, 0]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 strawR.setMatrix(m);
	M.restore(m);

	M.save(m);// straw house 
	 M.scale(m, .2, .2, .3);
	 //M.translate(m, [0, 0, 5]);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 strawH.setMatrix(m);
	M.restore(m);

   }
);
//*/
gl_start(canvas5,
   function(time) {
	
	M.identity(m);
	M.rotateY(m, Math.PI/2);
	M.translate(m, [0, 0, -.68]);
	M.scale(m, 0.9);

	M.save(m);// tile roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 1.3, 0]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 obj1.setMatrix(m);
	M.restore(m);

	M.save(m);// brick house
	 M.scale(m, .2, .2, .3);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 obj2.setMatrix(m);
	M.restore(m);
  
   	M.save(m);// stick roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 1.3, 3]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 obj3.setMatrix(m);
	M.restore(m);

	M.save(m);// stick house 
	 M.scale(m, .2, .2, .3);
	 M.translate(m, [0, 0, 2.5]);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 obj4.setMatrix(m);
	M.restore(m);

   	M.save(m);// straw roof
	 M.scale(m, .25, .15, .25);
	 M.translate(m, [0, 1.3, 6]);
	 M.rotateZ(m, Math.PI * 11 / 6);
	 obj5.setMatrix(m);
	M.restore(m);

	M.save(m);// straw house 
	 M.scale(m, .2, .2, .3);
	 M.translate(m, [0, 0, 5]);
	 M.rotateY(m, Math.PI/4);
	 M.rotateX(m, Math.PI/2);
	 obj6.setMatrix(m);
	M.restore(m);
//*/
   }
);


</script>

